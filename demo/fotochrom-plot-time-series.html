<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <title>fotochrom-plot-time-series Demo</title>
    <script src="../../webcomponentsjs/webcomponents-lite.min.js"></script>
    <link rel="import" href="../fotochrom-plot-time-series.html">
    <link rel="import" href="../../iron-ajax/iron-ajax.html">
  </head>
  <body unresolved>

    <p>An example of <code>&lt;fotochrom-plot-time-series&gt;</code>:</p>

    <iron-ajax
     id="instanceData"
     auto
     url="sales-value-greedbag.json"
     handle-as="json"
     debounce-duration="300"
    ></iron-ajax>

    <fotochrom-plot-time-series id="fotochromElement" style="width: 900px;"></fotochrom-plot-time-series>

    <script>
      let instanceData = document.querySelector('#instanceData');
      let fotochromElement = document.querySelector('#fotochromElement');

      instanceData.addEventListener('response', function(event) {
        fotochromElement.data = event.detail.response.buckets.map(bucket => {
          return {
            date: bucket.key_as_string,
            value: bucket.doc_count
          }
        });
      });
    </script>

  </body>
</html>
